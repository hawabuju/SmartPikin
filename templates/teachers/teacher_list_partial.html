{% load static %}

<div class="row g-4 teachers-row">
    {% if teachers %}
        {% for teacher in teachers %}
            <div class="col-lg-6 col-xl-4">
                <div class="teacher-item d-flex flex-column h-100 position-relative overflow-hidden">
                    <!-- Teacher Image -->
                    <div class="teacher-img">
                        {% if teacher.profile_image %}
                            <img src="{{ teacher.profile_image.url }}" class="img-fluid w-100" alt="Teacher Image">
                        {% else %}
                            <img src="{% static 'core/images/header_logo.png' %}" class="img-fluid w-100" alt="Default Teacher Image">
                        {% endif %}
                    </div>

                    <!-- Teacher Details -->
                    <div class="teacher-content p-4 flex-grow-1 bg-light">
                        <h4 class="mb-2 text-dark">
                            <a href="{% url 'core:teacher_profile_detail' teacher.id %}" class="text-decoration-none teacher-name" data-bs-toggle="tooltip" title="Click for more info">
                                Mr. {{ teacher.user.first_name }} {{ teacher.user.last_name }}
                            </a>
                        </h4>
                        
                        <!-- Styled Buttons for Certifications and Specialization -->
                        <div class="mb-3">
                            <span class="badge rounded-pill specialization-badge">
                                Specialization: {{ teacher.get_specialization_display }}
                            </span>
                            <span class="badge rounded-pill certification-badge">
                                Certification: {{ teacher.get_certifications_display }}
                            </span>
                        </div>

                        <p class="mb-1"><strong>School:</strong> {{ teacher.school }}</p>

                        <!-- Bio Modal Trigger -->
                        <button class="btn btn-outline-primary btn-sm show-bio-btn" data-bs-toggle="modal" data-bs-target="#bioModal{{ teacher.id }}">
                            Show Bio
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal for Bio -->
            <div class="modal fade" id="bioModal{{ teacher.id }}" tabindex="-1" aria-labelledby="bioModalLabel{{ teacher.id }}" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="bioModalLabel{{ teacher.id }}">
                                Bio of {{ teacher.user.first_name }} {{ teacher.user.last_name }}
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>{{ teacher.bio|linebreaks }}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        
        <!-- Pagination -->
        <div class="pagination d-flex justify-content-center mt-4">
            <span class="mr-2">Page {{ teachers.number }} of {{ teachers.paginator.num_pages }}</span>
            {% if teachers.has_previous %}
                <a href="?page=1&{{ request.GET.urlencode }}" class="btn btn-primary mx-1">First</a>
                <a href="?page={{ teachers.previous_page_number }}&{{ request.GET.urlencode }}" class="btn btn-primary mx-1">Previous</a>
            {% endif %}
            {% for num in teachers.paginator.page_range %}
                {% if teachers.number == num %}
                    <span class="btn btn-light mx-1">{{ num }}</span>
                {% else %}
                    <a href="?page={{ num }}&{{ request.GET.urlencode }}" class="btn btn-outline-primary mx-1">{{ num }}</a>
                {% endif %}
            {% endfor %}
            {% if teachers.has_next %}
                <a href="?page={{ teachers.next_page_number }}&{{ request.GET.urlencode }}" class="btn btn-primary mx-1">Next</a>
                <a href="?page={{ teachers.paginator.num_pages }}&{{ request.GET.urlencode }}" class="btn btn-primary mx-1">Last</a>
            {% endif %}
        </div>
    {% else %}
        <p class="text-center">No teachers found.</p>
    {% endif %}
</div>
